{"version":3,"sources":["../src/app.js"],"names":["express","require","logger","bodyParser","search","connection","jsonwebtoken","cors","app","publicDir","join","__dirname","init","use","json","urlencoded","extended","req","res","next","headers","authorization","split","verify","err","decode","user","undefined","configure","options","status","send","statusCode","message","originalUrl","module","exports"],"mappings":"AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;;AAEA,IAAIC,SAASD,QAAQ,QAAR,CAAb;AACA,IAAIE,aAAaF,QAAQ,aAAR,CAAjB;AACA,IAAIG,SAASH,QAAQ,qBAAR,CAAb;AACA,IAAII,aAAaJ,QAAQ,cAAR,CAAjB;AACA,IAAIK,eAAeL,QAAQ,cAAR,CAAnB;AACA,IAAIM,OAAON,QAAQ,MAAR,CAAX;;AAEA,IAAIO,MAAMR,SAAV;;AAEA,IAAIS,YAAYR,QAAQ,MAAR,EAAgBS,IAAhB,CAAqBC,SAArB,EAA+B,YAA/B,CAAhB;;AAEAN,WAAWO,IAAX;;AAEAJ,IAAIK,GAAJ,CAAQX,OAAO,KAAP,CAAR;AACAM,IAAIK,GAAJ,CAAQN,MAAR;AACAC,IAAIK,GAAJ,CAAQV,WAAWW,IAAX,EAAR;AACAN,IAAIK,GAAJ,CAAQV,WAAWY,UAAX,CAAsB,EAAEC,UAAU,IAAZ,EAAtB,CAAR;;AAGAR,IAAIK,GAAJ,CAAQ,UAASI,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAChC,MAAGF,IAAIG,OAAJ,IAAeH,IAAIG,OAAJ,CAAYC,aAA3B,IAA4CJ,IAAIG,OAAJ,CAAYC,aAAZ,CAA0BC,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,MAA4C,KAA3F,EAAkG;AAC/FhB,iBAAaiB,MAAb,CAAoBN,IAAIG,OAAJ,CAAYC,aAAZ,CAA0BC,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAApB,EAA6D,aAA7D,EAA4E,UAASE,GAAT,EAAcC,MAAd,EAAsB;;AAEhG,UAAID,GAAJ,EACCP,IAAIS,IAAJ,GAAWC,SAAX;;AAECV,UAAIS,IAAJ,GAAWD,MAAX;AACAN;AACF,KAPF;AASA,GAVH,MAUO;AACHF,QAAIS,IAAJ,GAAWC,SAAX;AACAR;AACD;AACH,CAfD;;AAiBAf,OAAOwB,SAAP,CAAiBpB,GAAjB;;AAGAA,IAAIqB,OAAJ,CAAY,GAAZ,EAAiBtB,MAAjB;AACAC,IAAIK,GAAJ,CAAQ,UAASI,GAAT,EAAcC,GAAd,EAAmB;AACzBA,MAAIY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,EAACC,YAAW,GAAZ,EAAiBC,SAAShB,IAAIiB,WAAJ,GAAkB,YAA5C,EAArB;AACD,CAFD;;AAMAC,OAAOC,OAAP,GAAiB5B,GAAjB","file":"app.js","sourcesContent":["var express = require('express');\n\nvar logger = require('morgan');\nvar bodyParser = require('body-parser');\nvar search = require('./app/routes/search');\nvar connection = require('../config/db');\nvar jsonwebtoken = require(\"jsonwebtoken\");\nvar cors = require(\"cors\");\n\nvar app = express();\n\nvar publicDir = require('path').join(__dirname,'/../public');\n\nconnection.init();\n\napp.use(logger('dev'));\napp.use(cors());\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({ extended: true }));\n\n\napp.use(function(req, res, next) {\n\tif(req.headers && req.headers.authorization && req.headers.authorization.split(' ')[0] === 'JWT') {\n  \t\tjsonwebtoken.verify(req.headers.authorization.split(' ')[1], 'RESTFULAPIs', function(err, decode) {\n    \t\n\t    \tif (err) \n\t    \t\treq.user = undefined;\n\t      \n\t      \treq.user = decode;\n\t      \tnext();\n    \t});\n  \t\n  \t}else{\n    \treq.user = undefined;\n    \tnext();\n  \t}\n});\n\nsearch.configure(app);\n\n\napp.options('*', cors());\napp.use(function(req, res) {\n  res.status(404).send({statusCode:404, message: req.originalUrl + ' not found' })\n});\n\n\n\nmodule.exports = app;"]}